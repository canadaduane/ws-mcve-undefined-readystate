<html>
  <head>

  </head>
  <body>
    <a href="https://stackoverflow.com/help/minimal-reproducible-example">MCVE</a> of the following WebSocket Error:
    <pre><code>
      /Users/dujohnson/Projects/relm/server/node_modules/ws/lib/websocket.js:838
      websocket.readyState = WebSocket.CLOSING;
                           ^

      TypeError: Cannot set property 'readyState' of undefined
        at Socket.socketOnClose (/Users/dujohnson/Projects/relm/server/node_modules/ws/lib/websocket.js:838:24)
        at Socket.emit (events.js:194:15)
        at TCP._handle.close (net.js:597:12)
    </code></pre>

    <p></p>Just run `yarn start` and load this page in Firefox (not Chrome), then wait up to 30 seconds. The server will crash with the above error.

    <p>
      <dl>
        <dt>node --version</dt><dd>v10.15.3</dd>
        <dt>yarn --version</dt><dd>1.22.4</dd>
        <dt>ws version</dt><dd>7.2.3</dd>
        <dt>Firefox Version</dt><dd>74.0.1</dd>
      </dl>
    </p>

    <script>
      var ws = new WebSocket('ws://localhost:3000')
    </script>
  </body>
</html>
